/* ----------------------------------------------------------------------------------------------------- */
/* @ Import/write your custom styles here.
/* @ Styles from this file will override 'vendors.scss' and Fuse's base styles.
/* ----------------------------------------------------------------------------------------------------- */
@import '../../node_modules/css-star-rating/css/star-rating.css';
@import 'flatpickr/dist/flatpickr.min.css';

::ng-deep .calendar-menu-panel {
  width: 700px !important;
  height: 500px !important;
  overflow: hidden;
  padding: 0 !important;
}

.mat-mdc-menu-panel {
  min-width: 112px;
  max-width: 800px !important;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  box-sizing: border-box;
  outline: 0;
  border-radius: var(--mat-menu-container-shape);
  background-color: var(--mat-menu-container-color);
  will-change: transform, opacity;
}

.gantt-container {
  height: 500px !important;
  width: 100% !important;
  border: 1px solid #ccc;
  overflow: auto;
}

@media (max-width: 768px) {
  .button-text {
    display: none;
  }
}

/* Estilo del mango de redimensionamiento */
.native-resizer {
  position: absolute;
  right: 0;
  top: 0;
  width: 6px;
  height: 100%;
  cursor: col-resize;
  z-index: 1000 !important;
  transition: background-color 0.2s;

  &:hover {
    background-color: #3b82f6;
  }
}

body.is-resizing-column {
  cursor: col-resize !important;
  user-select: none !important;

  * {
    pointer-events: none !important;
  }
}

.mat-header-cell {
  position: relative !important;
  overflow: visible !important;
}

/* üé® RESET GLOBAL DE MODO OSCURO */
.dark {

  // 1. Fondos Base
  body,
  .bg-default,
  .bg-white,
  .bg-slate-50,
  .bg-gray-50 {
    background-color: var(--fuse-bg-default) !important;
  }

  // 2. Cards y Contenedores
  .bg-card,
  .mat-mdc-card,
  .mat-card,
  [class*="bg-white"] {
    background-color: var(--fuse-bg-card) !important;
    --mdc-filled-card-container-color: var(--fuse-bg-card) !important;
    --mdc-elevated-card-container-color: var(--fuse-bg-card) !important;
    border-color: var(--fuse-border) !important;
  }

  // 3. Textos e Iconos
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  span,
  p,
  div,
  mat-icon,
  .text-main,
  .text-slate-800,
  .text-gray-900 {
    &:not(.text-white):not(.text-blue-500):not(.text-emerald-500):not(.text-green-600) {
      color: var(--fuse-text-default) !important;
    }
  }

  // 4. Form Fields (Inputs, Selects, Labels) - REFORZADO
  .mat-mdc-form-field {
    // Colores de texto e input
    --mdc-filled-textField-input-text-color: var(--fuse-text-default) !important;
    --mdc-outlined-textField-input-text-color: var(--fuse-text-default) !important;
    --mdc-filled-textField-idle-line-color: var(--fuse-border) !important;
    --mdc-outlined-textField-idle-outline-color: var(--fuse-border) !important;

    // MAT-LABEL: Estados del texto flotante
    --mdc-filled-textField-label-text-color: var(--fuse-text-secondary) !important;
    --mdc-outlined-textField-label-text-color: var(--fuse-text-secondary) !important;
    --mdc-filled-textField-focus-label-text-color: var(--fuse-primary) !important;
    --mdc-outlined-textField-focus-label-text-color: var(--fuse-primary) !important;
    --mdc-filled-textField-disabled-label-text-color: var(--fuse-text-hint) !important;

    .mat-mdc-form-field-input-control {
      color: var(--fuse-text-default) !important;
      caret-color: var(--fuse-primary) !important;
    }

    .mat-mdc-select-arrow,
    .mat-datepicker-toggle,
    .mat-icon {
      color: var(--fuse-text-secondary) !important;
    }

    // Forzar el color del label dentro del componente
    .mat-mdc-floating-label mat-label {
      color: inherit !important;
    }
  }

  .mat-mdc-select-value-text {
    color: var(--fuse-text-default) !important;
  }

  // 5. Tablas
  .mat-mdc-table {
    background: var(--fuse-bg-card) !important;

    .mat-mdc-header-cell {
      background-color: var(--fuse-bg-default) !important;
      color: var(--fuse-text-secondary) !important;
    }

    .mat-mdc-cell {
      color: var(--fuse-text-default) !important;
      border-bottom-color: var(--fuse-border) !important;
    }
  }

  // 6. Calendario (Datepicker)
  .mat-datepicker-content {
    background-color: var(--fuse-bg-card) !important;
    color: var(--fuse-text-default) !important;
    border: 1px solid var(--fuse-border);
  }

  .mat-calendar {
    background-color: var(--fuse-bg-card) !important;

    .mat-calendar-body-label,
    .mat-calendar-body-cell-content {
      color: var(--fuse-text-default) !important;
    }

    .mat-calendar-table-header,
    .mat-calendar-abbr {
      color: var(--fuse-text-secondary) !important;
    }

    .mat-calendar-previous-button,
    .mat-calendar-next-button,
    .mat-calendar-period-button {
      color: var(--fuse-text-default) !important;
    }

    // D√çA SELECCIONADO: C√≠rculo y Texto
    .mat-calendar-body-selected {
      background-color: var(--fuse-primary) !important;
      color: var(--fuse-primary-text) !important;
    }

    .mat-calendar-body-today:not(.mat-calendar-body-selected) {
      border-color: var(--fuse-primary) !important;
    }

    // Hover en d√≠as
    .mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
      background-color: var(--fuse-bg-hover) !important;
    }
  }

  .mat-mdc-form-field {

    // 1. Forzar color de la etiqueta cuando est√° flotando (arriba) o en reposo (dentro)
    .mdc-floating-label,
    .mat-mdc-floating-label,
    .mat-mdc-floating-label mat-label {
      color: var(--fuse-text-secondary) !important;
    }

    // 2. Forzar color cuando el campo tiene el foco (clic activo)
    &.mat-focused {

      .mdc-floating-label,
      .mat-mdc-floating-label,
      .mat-mdc-floating-label mat-label {
        color: var(--fuse-primary) !important;
      }
    }

    // 3. Forzar color cuando hay un error (opcional pero recomendado)
    &.mat-form-field-invalid {

      .mdc-floating-label,
      .mat-mdc-floating-label,
      .mat-mdc-floating-label mat-label {
        color: var(--fuse-error) !important;
      }
    }

    // 4. Arreglo para el texto de ayuda (hint) y contador si los usas
    .mat-mdc-form-field-hint,
    .mat-mdc-form-field-error,
    .mat-mdc-form-field-helper-text {
      color: var(--fuse-text-hint) !important;
    }
  }
}

/* Asegura que el visor de PDF tenga visibilidad */
ngx-extended-pdf-viewer {
  display: block;
  width: 100%;
  background-color: #525659;
  /* Color de fondo t√≠pico de PDF.js */
}

/* Fix para corregir el colapso de altura en Modales */
.mat-mdc-dialog-content {
  max-height: none !important;
}