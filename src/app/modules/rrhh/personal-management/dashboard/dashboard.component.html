<div class="flex flex-col flex-auto min-w-0">
    <div class="flex flex-col shadow bg-card">
        <div class="flex flex-col flex-0 p-6 sm:p-10 border-b bg-card">
            <div class="text-3xl font-bold tracking-tight">Staff Management</div>
            <div class="text-secondary">Administra la informaciÃ³n laboral y personal del equipo de JR IngenierÃ­a
                ElÃ©ctrica.</div>
        </div>
    </div>

    <div class="p-6 sm:p-10">
        <div class="grid w-full min-w-0 grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
            @for (member of users; track member.usuarioId) {
            @if(member.activo){
            <div
                class="bg-card flex flex-auto flex-col items-center overflow-hidden rounded-2xl shadow hover:shadow-lg transition-shadow duration-150">
                <div class="flex w-full flex-auto flex-col p-8 text-center">
                    <div class="relative mx-auto h-32 w-32 rounded-full">
                        <img class="h-full w-full object-cover rounded-full border-4 border-gray-100"
                            [src]="member.avatar || 'assets/images/avatars/placeholder.jpg'" alt="Avatar" />

                        <!-- Gorro de cumpleaÃ±os animado (Emoji) -->
                        @if (member.isBirthdayToday) {
                        <div class="absolute -top-6 -right-4 text-6xl animate-bounce filter drop-shadow-lg z-10"
                            title="Â¡Feliz CumpleaÃ±os!">
                            ðŸ¥³
                        </div>
                        <div class="absolute -bottom-2 -left-2 text-4xl animate-pulse z-10">
                            ðŸŽ‚
                        </div>
                        }

                        <!-- Countdown para cumpleaÃ±os cercanos (< 30 dÃ­as) -->
                        @if (!member.isBirthdayToday && member.daysUntilBirthday !== null && member.daysUntilBirthday <=
                            30) { <div
                            class="absolute -top-2 -right-6 bg-white dark:bg-gray-800 px-3 py-1 rounded-full shadow-md border border-gray-200 dark:border-gray-700 flex items-center gap-1 z-10">
                            <span class="text-xs font-bold text-pink-500">Faltan {{ member.daysUntilBirthday }}
                                dÃ­as</span>
                            <span class="text-sm">ðŸŽˆ</span>
                    </div>
                    }

                    <div class="absolute bottom-1 right-1 h-5 w-5 rounded-full border-2 border-white"
                        [ngClass]="member.activo ? 'bg-green-500' : 'bg-gray-400'"></div>
                </div>

                <div class="mt-6 font-semibold text-lg leading-tight">{{ member.nombreUsuario }}</div>
                <div class="text-secondary font-medium">{{ member.nombreRol }}</div>
                <div class="mt-1 text-md text-hint">{{ member.email }}</div>
            </div>

            <div class="flex w-full items-center divide-x border-t bg-gray-50">
                <button (click)="openConfigModal(member)"
                    class="flex flex-auto items-center justify-center py-4 hover:bg-gray-100 font-medium text-primary">
                    <mat-icon class="icon-size-5 mr-2" [svgIcon]="'heroicons_outline:cog-6-tooth'"></mat-icon>
                    Configurar
                </button>
            </div>
        </div>
        }
        }
    </div>
</div>
</div>