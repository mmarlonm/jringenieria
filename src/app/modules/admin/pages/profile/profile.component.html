<div class="flex min-w-0 flex-auto flex-col">
    <!-- Header -->
    <div class="bg-card flex flex-col shadow">
        <!-- Cover image -->
        <div>
            <img class="h-40 object-cover lg:h-80" src="images/pages/profile/cover-jr-site.jpg" alt="Cover image" />
        </div>

        <!-- User info -->
        <div class="bg-card mx-auto flex w-full max-w-5xl flex-0 flex-col items-center px-8 lg:h-18 lg:flex-row">
            <!-- Avatar -->
            <div class="relative">
                <!-- Imagen del avatar -->
                <div class="-mt-26 rounded-full lg:-mt-22">
                    <img class="ring-bg-card h-32 w-32 rounded-full ring-4"
                        [src]="baseAavatar || 'images/avatars/male-04.jpg'" alt="User avatar" />
                </div>

                <!-- Botón de editar avatar -->
                <button
                    class="absolute bottom-2 right-2 flex items-center justify-center h-8 w-8 bg-blue-500 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400"
                    title="Editar avatar" (click)="fileInput.click()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.232 5.232l3.536 3.536m-2.036-4.572l2.036 2.036-8.036 8.036H9v-2.036l8.036-8.036z" />
                    </svg>
                </button>

                <!-- Input para seleccionar archivo -->
                <input #fileInput type="file" accept="image/*" class="hidden" (change)="onFileSelected($event)" />
            </div>
        </div>
    </div>

    <!-- Main -->
    <div class="mx-auto flex w-full max-w-5xl flex-auto justify-center p-6 sm:p-8">
        <!-- Column -->
        <div class="mr-8 hidden flex-col items-start lg:flex">
            <!-- About me -->
            <fuse-card class="flex w-full max-w-80 flex-col p-8">
                <div class="text-2xl font-semibold leading-tight">About Me</div>
                <div class="mt-4">
                    I’m a friendly kitchen assistant who suffers from a severe
                    phobia of buttons.
                    <br /><br />
                    Brother of Elijah Jay Watkins, who has phobia of buttons and
                    trust issues.
                </div>
                <hr class="my-6 w-full border-t" />
                <div class="flex flex-col">
                    <div class="flex items-center">
                        <mat-icon class="mr-3 icon-size-5" [svgIcon]="'heroicons_solid:map-pin'"></mat-icon>
                        <span class="leading-none">London, UK</span>
                    </div>
                    <div class="mt-4 flex items-center">
                        <mat-icon class="mr-3 icon-size-5" [svgIcon]="'heroicons_solid:briefcase'"></mat-icon>
                        <span class="leading-none">ACME Corp. Lead UX Designer</span>
                    </div>
                    <div class="mt-4 flex items-center">
                        <mat-icon class="mr-3 icon-size-5" [svgIcon]="'heroicons_solid:cake'"></mat-icon>
                        <span class="leading-none">April, 24</span>
                    </div>
                </div>
                <a class="mt-8 px-6" mat-flat-button [color]="'primary'" [routerLink]="['./']">
                    See complete bio
                </a>
            </fuse-card>



            <!-- Groups -->
           <!-- <fuse-card class="mt-8 flex w-full max-w-80 flex-col px-8 pb-4 pt-6">
                <div class="flex items-center justify-between">
                    <div class="text-2xl font-semibold leading-tight">
                        Groups
                    </div>
                    <div class="-mr-3">
                        <button mat-icon-button [matMenuTriggerFor]="listCard02Menu">
                            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:ellipsis-vertical'"></mat-icon>
                        </button>
                        <mat-menu #listCard02Menu="matMenu">
                            <button mat-menu-item>Search for groups</button>
                        </mat-menu>
                    </div>
                </div>
                <div class="mt-5 flex flex-col">
                    <div class="flex items-center">
                        <img class="mr-4 h-14 w-14 rounded object-cover" src="images/cards/coffee-shop-01-320x200.jpg"
                            alt="Card cover image" />
                        <div class="flex min-w-0 flex-col">
                            <div class="font-medium leading-none">
                                The Port Cafe
                            </div>
                            <div class="mt-1 truncate text-md leading-none">
                                Best cafe of the downtown New York
                            </div>
                            <div class="text-secondary mt-2 text-md leading-none">
                                1.2k followers
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex items-center">
                        <img class="mr-4 h-14 w-14 rounded object-cover" src="images/cards/coffee-shop-02-512x512.jpg"
                            alt="Card cover image" />
                        <div class="flex min-w-0 flex-col">
                            <div class="font-medium leading-none">
                                Design House LLC.
                            </div>
                            <div class="mt-1 truncate text-md leading-none">
                                UI/UX, brand and product design
                            </div>
                            <div class="text-secondary mt-2 text-md leading-none">
                                957 followers
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex items-center">
                        <img class="mr-4 h-14 w-14 rounded object-cover" src="images/cards/coffee-shop-03-320x320.jpg"
                            alt="Card cover image" />
                        <div class="flex min-w-0 flex-col">
                            <div class="font-medium leading-none">
                                Crax Laser Tag
                            </div>
                            <div class="mt-1 truncate text-md leading-none">
                                30% off with group of 6 people
                            </div>
                            <div class="text-secondary mt-2 text-md leading-none">
                                342 followers
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex items-center">
                        <img class="mr-4 h-14 w-14 rounded object-cover" src="images/cards/sneakers-01-320x200.jpg"
                            alt="Card cover image" />
                        <div class="flex min-w-0 flex-col">
                            <div class="font-medium leading-none">
                                Roadster Clothing Inc.
                            </div>
                            <div class="mt-1 truncate text-md leading-none">
                                $25 off on orders $500 and over
                            </div>
                            <div class="text-secondary mt-2 text-md leading-none">
                                4.7k followers
                            </div>
                        </div>
                    </div>
                </div>
                <div class="-mx-3 mt-6 flex items-center">
                    <a class="px-3" mat-button [color]="'primary'" [routerLink]="['./']">
                        See all groups
                    </a>
                </div>
            </fuse-card>-->


        </div>

        <!-- Column -->
        <div class="flex flex-col items-start">
            <!-- Create Post -->
            <fuse-card class="flex w-full max-w-140 flex-col p-6 pb-6 sm:p-8">
                <div class="text-xl font-semibold">Informacion de Perfil</div>
                <div class="mt-8 flex flex-col items-start sm:flex-row">
                    <form [formGroup]="userForm">
                        <!-- Nombre de Usuario -->
                        <mat-form-field appearance="outline" class="w-full mb-4">
                            <mat-label>Nombre de Usuario</mat-label>
                            <input matInput formControlName="nombreUsuario" />
                            <mat-error *ngIf="userForm.get('nombreUsuario')?.hasError('required')">
                                El nombre de usuario es obligatorio
                            </mat-error>
                            <mat-error *ngIf="userForm.get('nombreUsuario')?.hasError('maxlength')">
                                Máximo 100 caracteres
                            </mat-error>
                        </mat-form-field>

                        <!-- Email -->
                        <mat-form-field appearance="outline" class="w-full mb-4">
                            <mat-label>Email</mat-label>
                            <input matInput formControlName="email" type="email" />
                            <mat-error *ngIf="userForm.get('email')?.hasError('required')">
                                El correo electrónico es obligatorio
                            </mat-error>
                            <mat-error *ngIf="userForm.get('email')?.hasError('email')">
                                El correo electrónico no es válido
                            </mat-error>
                            <mat-error *ngIf="userForm.get('email')?.hasError('maxlength')">
                                Máximo 255 caracteres
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="outline" class="w-full mb-4">
                            <mat-label>Contraseña actual</mat-label>
                            <input matInput [type]="hideCurrentPassword ? 'password' : 'text'"
                                formControlName="currentPasswordUser" />
                            <button mat-icon-button matSuffix (click)="hideCurrentPassword = !hideCurrentPassword"
                                [attr.aria-label]="'Mostrar contraseña actual'"
                                [attr.aria-pressed]="!hideCurrentPassword">
                                <mat-icon>{{ hideCurrentPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                            </button>
                            <mat-error *ngIf="userForm.get('currentPasswordUser')?.hasError('required')">
                                La contraseña actual es requerida.
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>Nueva contraseña</mat-label>
                            <input matInput [type]="hideNewPassword ? 'password' : 'text'"
                                formControlName="newPasswordUser" />
                            <button mat-icon-button matSuffix (click)="hideNewPassword = !hideNewPassword"
                                [attr.aria-label]="'Mostrar nueva contraseña'" [attr.aria-pressed]="!hideNewPassword">
                                <mat-icon>{{ hideNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                            </button>
                            <mat-error *ngIf="userForm.get('newPasswordUser')?.hasError('required')">
                                La nueva contraseña es requerida.
                            </mat-error>
                            <mat-error *ngIf="userForm.get('newPasswordUser')?.hasError('minlength')">
                                La nueva contraseña debe tener al menos 6 caracteres.
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>Confirmar nueva contraseña</mat-label>
                            <input matInput [type]="hideConfirmPassword ? 'password' : 'text'"
                                formControlName="confirmPasswordUser" />
                            <button mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword"
                                [attr.aria-label]="'Mostrar confirmación de contraseña'"
                                [attr.aria-pressed]="!hideConfirmPassword">
                                <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                            </button>
                            <mat-error *ngIf="userForm.get('confirmPasswordUser')?.hasError('required')">
                                Debes confirmar la nueva contraseña.
                            </mat-error>
                            <mat-error *ngIf="userForm.errors?.passwordMismatch">
                                Las contraseñas no coinciden.
                            </mat-error>
                        </mat-form-field>

                        
                    </form>
                </div>
            </fuse-card>
        </div>
        
    </div>
    <div class="ml-6 mr-6">
            <fuse-card class="mt-8 flex w-full flex-col px-8 pb-4 pt-6">
                <div class="text-xl font-semibold">Informacion Personal del Perfil</div>
                <form [formGroup]="userinformationForm">
                <div class="mt-8 flex flex-col items-start sm:flex-row grid grid-cols-2 gap-4">
                    <mat-form-field>
                        <mat-label>Sexo</mat-label>
                        <mat-select formControlName="sexo">
                            <mat-option [value]="1">Hombre</mat-option>
                            <mat-option [value]="2">Mujer</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Fecha de Cumpleaños</mat-label>
                        <input matInput formControlName="fechaNacimiento" [matDatepicker]="picker">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                
                <div class="mt-8 flex flex-col items-start sm:flex-row grid grid-cols-3 gap-4">
                    <mat-form-field>
                        <mat-label>Numero de contacto emergencia 1</mat-label>
                        <input matInput formControlName="NumeroContacto1" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Nombre</mat-label>
                        <input matInput formControlName="nombreContacto1" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Parentesco</mat-label>
                        <input matInput formControlName="parentesco1" />
                    </mat-form-field>
                     <mat-form-field>
                        <mat-label>Numero de contacto emergencia 2</mat-label>
                        <input matInput formControlName="NumeroContacto2" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Nombre</mat-label>
                        <input matInput formControlName="nombreContacto2" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Parentesco</mat-label>
                        <input matInput formControlName="parentesco2" />
                    </mat-form-field>
                </div>
                <div class=" flex flex-col items-start sm:flex-row w-full ">
                    <mat-form-field class="mt-2 w-full flex flex-col " >
                        <mat-label>Dirección</mat-label>
                        <input matInput formControlName="direccion" />
                    </mat-form-field>
                </div>
                </form>
                <!-- Botón Guardar -->
                        <div class="flex justify-end">
                            <button mat-raised-button color="primary" [disabled]="userForm.invalid"
                                (click)="onSubmit()">
                                Guardar Cambios
                            </button>
                        </div>

            </fuse-card>

        </div>
</div>