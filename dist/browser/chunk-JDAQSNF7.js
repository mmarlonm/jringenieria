import{a as Ve}from"./chunk-KY3NGPN2.js";import{a as we,b as be,c as ge,d as xe}from"./chunk-RLMMR3IR.js";import{b as Te}from"./chunk-AOYAXRMH.js";import{b as ve}from"./chunk-OXDELVB2.js";import"./chunk-D7BAGR3P.js";import{a as re,b as ie,d as ae,h as oe,i as ne,k as Ie,m as Ue,n as je}from"./chunk-S5EGDSMZ.js";import{c as _e,e as x,g as Ce,h as Se,k as Ee,m as ye,n as Fe,p as Me,r as Pe,s as ke}from"./chunk-MFXYIEP5.js";import{ga as se,ha as le,ia as me,k as U,ka as de,ma as ue,na as ce}from"./chunk-GZIOB5VH.js";import{a as he}from"./chunk-72NZA7M6.js";import"./chunk-QWI5PWUG.js";import{b as fe}from"./chunk-3JCBS2CK.js";import{a as pe}from"./chunk-WQN3REH4.js";import"./chunk-2MWZZXHX.js";import{A as te,f as Q,l as Z,z as ee}from"./chunk-N75GUXKZ.js";import{$a as o,Ab as $,Db as y,Gc as K,Hb as e,Ib as t,Jb as d,K as q,Nb as W,Tb as b,V as P,Vb as X,W as z,Wb as J,X as R,Xb as _,Ya as O,ab as w,cc as k,dc as i,ec as F,f as L,ka as S,lc as M,mc as I,ta as G,ua as v,ub as f,va as h,vb as E,wa as H,wb as s,xa as Y,y as D}from"./chunk-PTZSXNKB.js";import{a as N,b as A}from"./chunk-NEB6MB4Y.js";var ze=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],Re=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];function Ge(a,n){a&1&&(e(0,"div",0),_(1),t(),e(2,"div",1),_(3,1),t())}function He(a,n){a&1&&(e(0,"div",2),_(1,3),t()),a&2&&s("@expandCollapse",void 0)}function Ye(a,n){if(a&1&&(_(0,2),f(1,He,2,1,"div",2)),a&2){let Le=X();o(),y(Le.expanded?1:-1)}}var Be=(()=>{let n=class n{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&this.face==="back","fuse-card-face-front":this.flippable&&this.face==="front","fuse-card-flippable":this.flippable}}ngOnChanges(m){"expanded"in m&&(this.expanded=U(m.expanded.currentValue)),"flippable"in m&&(this.flippable=U(m.flippable.currentValue))}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=S({type:n,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(l,r){l&2&&$(r.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[G,M],ngContentSelectors:Re,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],[1,"fuse-card-expansion"]],template:function(l,r){l&1&&(J(ze),f(0,Ge,4,0)(1,Ye,2,1)),l&2&&(y(r.flippable?0:-1),o(),y(r.flippable?-1:1))},styles:[`fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}
`],encapsulation:2,data:{animation:he}});let a=n;return a})();var Ne=()=>["./"];function Oe(a,n){a&1&&(e(0,"mat-error"),i(1," El nombre de usuario es obligatorio "),t())}function $e(a,n){a&1&&(e(0,"mat-error"),i(1," M\xE1ximo 100 caracteres "),t())}function We(a,n){a&1&&(e(0,"mat-error"),i(1," El correo electr\xF3nico es obligatorio "),t())}function Xe(a,n){a&1&&(e(0,"mat-error"),i(1," El correo electr\xF3nico no es v\xE1lido "),t())}function Je(a,n){a&1&&(e(0,"mat-error"),i(1," M\xE1ximo 255 caracteres "),t())}function Ke(a,n){a&1&&(e(0,"mat-error"),i(1," La contrase\xF1a actual es requerida. "),t())}function Qe(a,n){a&1&&(e(0,"mat-error"),i(1," La nueva contrase\xF1a es requerida. "),t())}function Ze(a,n){a&1&&(e(0,"mat-error"),i(1," La nueva contrase\xF1a debe tener al menos 6 caracteres. "),t())}function et(a,n){a&1&&(e(0,"mat-error"),i(1," Debes confirmar la nueva contrase\xF1a. "),t())}function tt(a,n){a&1&&(e(0,"mat-error"),i(1," Las contrase\xF1as no coinciden. "),t())}var Ae=(()=>{let n=class n{constructor(m,l,r,u,c,p){this._userService=m,this.cdRef=l,this._formBuilder=r,this._snackBar=u,this._authService=c,this._router=p,this.userAvatar=null,this._unsubscribeAll=new L,this.hideCurrentPassword=!0,this.hideNewPassword=!0,this.hideConfirmPassword=!0,this.countdown=5}ngOnInit(){this._userService.user$.pipe(P(this._unsubscribeAll)).subscribe(m=>{this.user=m.usuario,this.baseAavatar=this.user.avatar,this.userForm=this._formBuilder.group({nombreUsuario:[this.user.nombreUsuario,x.required],email:[m.usuario.email,[x.required,x.email,x.maxLength(255)]],currentPasswordUser:[""],newPasswordUser:["",[x.minLength(6)]],confirmPasswordUser:[""]},{validators:this.passwordsMatch}),this.userForm.get("newPasswordUser")?.valueChanges.subscribe(()=>{this.userForm.updateValueAndValidity()}),this.userForm.get("confirmPasswordUser")?.valueChanges.subscribe(()=>{this.userForm.updateValueAndValidity()})})}passwordsMatch(m){let l=m.get("newPasswordUser")?.value,r=m.get("confirmPasswordUser")?.value;return l===r?null:{passwordMismatch:!0}}onFileSelected(m){let l=m.target;if(l.files&&l.files.length>0){let r=l.files[0],u=new FileReader;u.onload=()=>{this.userAvatar=u.result},u.readAsDataURL(r),this.uploadAvatar(r)}}uploadAvatar(m){let l=new FormData;l.append("foto",m),this._userService.updateAvatar(this.user.id,l).subscribe(r=>{this._userService.user=A(N({},this.user),{avatar:r.avatarBase64}),this.baseAavatar=r.avatarBase64,this.cdRef.markForCheck()})}onSubmit(){if(this.userForm.invalid)return;let{nombreUsuario:m,email:l,currentPasswordUser:r,newPasswordUser:u,confirmPasswordUser:c}=this.userForm.value,p=this.user.id,C={nombreUsuario:m,email:l,id:p};this._userService.updateUser(C).subscribe(()=>{this._snackBar.open("Datos de usuario actualizados correctamente","Cerrar",{duration:3e3})},g=>{this._snackBar.open("Error al actualizar datos de usuario","Cerrar",{duration:3e3})}),r&&u&&c&&this._userService.changePassword(Number.parseInt(p),r,u,c).subscribe(g=>{this._snackBar.open("Contrase\xF1a actualizada correctamente","Cerrar",{duration:3e3}),setTimeout(()=>{this._authService.signOut(),D(1e3,1e3).pipe(q(()=>{this._router.navigate(["sign-in"])}),z(()=>this.countdown>0),P(this._unsubscribeAll),R(()=>this.countdown--)).subscribe()},3e3)},g=>{this._snackBar.open(g.error.mensaje,"Cerrar",{duration:3e3})})}};n.\u0275fac=function(l){return new(l||n)(w(pe),w(K),w(Me),w(Ve),w(fe),w(ee))},n.\u0275cmp=S({type:n,selectors:[["profile"]],standalone:!0,features:[M],decls:138,vars:36,consts:[["fileInput",""],["listCard02Menu","matMenu"],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"bg-card","flex","flex-col","shadow"],["src","images/pages/profile/cover-jr.jpg","alt","Cover image",1,"h-40","object-cover","lg:h-80"],[1,"bg-card","mx-auto","flex","w-full","max-w-5xl","flex-0","flex-col","items-center","px-8","lg:h-18","lg:flex-row"],[1,"relative"],[1,"-mt-26","rounded-full","lg:-mt-22"],["alt","User avatar",1,"ring-bg-card","h-32","w-32","rounded-full","ring-4",3,"src"],["title","Editar avatar",1,"absolute","bottom-2","right-2","flex","items-center","justify-center","h-8","w-8","bg-blue-500","text-white","rounded-full","hover:bg-blue-600","focus:outline-none","focus:ring-2","focus:ring-blue-400",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M15.232 5.232l3.536 3.536m-2.036-4.572l2.036 2.036-8.036 8.036H9v-2.036l8.036-8.036z"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"mx-auto","flex","w-full","max-w-5xl","flex-auto","justify-center","p-6","sm:p-8"],[1,"mr-8","hidden","flex-col","items-start","lg:flex"],[1,"flex","w-full","max-w-80","flex-col","p-8"],[1,"text-2xl","font-semibold","leading-tight"],[1,"mt-4"],[1,"my-6","w-full","border-t"],[1,"flex","flex-col"],[1,"flex","items-center"],[1,"mr-3","icon-size-5",3,"svgIcon"],[1,"leading-none"],[1,"mt-4","flex","items-center"],["mat-flat-button","",1,"mt-8","px-6",3,"color","routerLink"],[1,"mt-8","flex","w-full","max-w-80","flex-col","px-8","pb-4","pt-6"],[1,"flex","items-center","justify-between"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["mat-menu-item",""],[1,"mt-5","flex","flex-col"],["src","images/cards/coffee-shop-01-320x200.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],[1,"flex","min-w-0","flex-col"],[1,"font-medium","leading-none"],[1,"mt-1","truncate","text-md","leading-none"],[1,"text-secondary","mt-2","text-md","leading-none"],[1,"mt-6","flex","items-center"],["src","images/cards/coffee-shop-02-512x512.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],["src","images/cards/coffee-shop-03-320x320.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],["src","images/cards/sneakers-01-320x200.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],[1,"-mx-3","mt-6","flex","items-center"],["mat-button","",1,"px-3",3,"color","routerLink"],[1,"flex","flex-col","items-start"],[1,"flex","w-full","max-w-140","flex-col","p-6","pb-6","sm:p-8"],[1,"text-xl","font-semibold"],[1,"mt-8","flex","flex-col","items-start","sm:flex-row"],[3,"formGroup"],["appearance","outline",1,"w-full","mb-4"],["matInput","","formControlName","nombreUsuario"],[4,"ngIf"],["matInput","","formControlName","email","type","email"],["matInput","","formControlName","currentPasswordUser",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["appearance","outline"],["matInput","","formControlName","newPasswordUser",3,"type"],["matInput","","formControlName","confirmPasswordUser",3,"type"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(l,r){if(l&1){let u=W();e(0,"div",2)(1,"div",3)(2,"div"),d(3,"img",4),t(),e(4,"div",5)(5,"div",6)(6,"div",7),d(7,"img",8),t(),e(8,"button",9),b("click",function(){v(u);let p=k(12);return h(p.click())}),H(),e(9,"svg",10),d(10,"path",11),t()(),Y(),e(11,"input",12,0),b("change",function(p){return v(u),h(r.onFileSelected(p))}),t()()()(),e(13,"div",13)(14,"div",14)(15,"fuse-card",15)(16,"div",16),i(17,"About Me"),t(),e(18,"div",17),i(19," I\u2019m a friendly kitchen assistant who suffers from a severe phobia of buttons. "),d(20,"br")(21,"br"),i(22," Brother of Elijah Jay Watkins, who has phobia of buttons and trust issues. "),t(),d(23,"hr",18),e(24,"div",19)(25,"div",20),d(26,"mat-icon",21),e(27,"span",22),i(28,"London, UK"),t()(),e(29,"div",23),d(30,"mat-icon",21),e(31,"span",22),i(32,"ACME Corp. Lead UX Designer"),t()(),e(33,"div",23),d(34,"mat-icon",21),e(35,"span",22),i(36,"April, 24"),t()()(),e(37,"a",24),i(38," See complete bio "),t()(),e(39,"fuse-card",25)(40,"div",26)(41,"div",16),i(42," Groups "),t(),e(43,"div",27)(44,"button",28),d(45,"mat-icon",29),t(),e(46,"mat-menu",null,1)(48,"button",30),i(49,"Search for groups"),t()()()(),e(50,"div",31)(51,"div",20),d(52,"img",32),e(53,"div",33)(54,"div",34),i(55," The Port Cafe "),t(),e(56,"div",35),i(57," Best cafe of the downtown New York "),t(),e(58,"div",36),i(59," 1.2k followers "),t()()(),e(60,"div",37),d(61,"img",38),e(62,"div",33)(63,"div",34),i(64," Design House LLC. "),t(),e(65,"div",35),i(66," UI/UX, brand and product design "),t(),e(67,"div",36),i(68," 957 followers "),t()()(),e(69,"div",37),d(70,"img",39),e(71,"div",33)(72,"div",34),i(73," Crax Laser Tag "),t(),e(74,"div",35),i(75," 30% off with group of 6 people "),t(),e(76,"div",36),i(77," 342 followers "),t()()(),e(78,"div",37),d(79,"img",40),e(80,"div",33)(81,"div",34),i(82," Roadster Clothing Inc. "),t(),e(83,"div",35),i(84," $25 off on orders $500 and over "),t(),e(85,"div",36),i(86," 4.7k followers "),t()()()(),e(87,"div",41)(88,"a",42),i(89," See all groups "),t()()()(),e(90,"div",43)(91,"fuse-card",44)(92,"div",45),i(93,"Informacion de Perfil"),t(),e(94,"div",46)(95,"form",47)(96,"mat-form-field",48)(97,"mat-label"),i(98,"Nombre de Usuario"),t(),d(99,"input",49),f(100,Oe,2,0,"mat-error",50)(101,$e,2,0,"mat-error",50),t(),e(102,"mat-form-field",48)(103,"mat-label"),i(104,"Email"),t(),d(105,"input",51),f(106,We,2,0,"mat-error",50)(107,Xe,2,0,"mat-error",50)(108,Je,2,0,"mat-error",50),t(),e(109,"mat-form-field",48)(110,"mat-label"),i(111,"Contrase\xF1a actual"),t(),d(112,"input",52),e(113,"button",53),b("click",function(){return v(u),h(r.hideCurrentPassword=!r.hideCurrentPassword)}),e(114,"mat-icon"),i(115),t()(),f(116,Ke,2,0,"mat-error",50),t(),e(117,"mat-form-field",54)(118,"mat-label"),i(119,"Nueva contrase\xF1a"),t(),d(120,"input",55),e(121,"button",53),b("click",function(){return v(u),h(r.hideNewPassword=!r.hideNewPassword)}),e(122,"mat-icon"),i(123),t()(),f(124,Qe,2,0,"mat-error",50)(125,Ze,2,0,"mat-error",50),t(),e(126,"mat-form-field",54)(127,"mat-label"),i(128,"Confirmar nueva contrase\xF1a"),t(),d(129,"input",56),e(130,"button",53),b("click",function(){return v(u),h(r.hideConfirmPassword=!r.hideConfirmPassword)}),e(131,"mat-icon"),i(132),t()(),f(133,et,2,0,"mat-error",50)(134,tt,2,0,"mat-error",50),t(),e(135,"div",57)(136,"button",58),b("click",function(){return v(u),h(r.onSubmit())}),i(137," Guardar Cambios "),t()()()()()()()()}if(l&2){let u,c,p,C,g,j,T,V,B,De=k(47);o(7),s("src",r.baseAavatar||"images/avatars/male-04.jpg",O),o(19),s("svgIcon","heroicons_solid:map-pin"),o(4),s("svgIcon","heroicons_solid:briefcase"),o(4),s("svgIcon","heroicons_solid:cake"),o(3),s("color","primary")("routerLink",I(34,Ne)),o(7),s("matMenuTriggerFor",De),o(),s("svgIcon","heroicons_solid:ellipsis-vertical"),o(43),s("color","primary")("routerLink",I(35,Ne)),o(7),s("formGroup",r.userForm),o(5),s("ngIf",(u=r.userForm.get("nombreUsuario"))==null?null:u.hasError("required")),o(),s("ngIf",(c=r.userForm.get("nombreUsuario"))==null?null:c.hasError("maxlength")),o(5),s("ngIf",(p=r.userForm.get("email"))==null?null:p.hasError("required")),o(),s("ngIf",(C=r.userForm.get("email"))==null?null:C.hasError("email")),o(),s("ngIf",(g=r.userForm.get("email"))==null?null:g.hasError("maxlength")),o(4),s("type",r.hideCurrentPassword?"password":"text"),o(),E("aria-label","Mostrar contrase\xF1a actual")("aria-pressed",!r.hideCurrentPassword),o(2),F(r.hideCurrentPassword?"visibility_off":"visibility"),o(),s("ngIf",(j=r.userForm.get("currentPasswordUser"))==null?null:j.hasError("required")),o(4),s("type",r.hideNewPassword?"password":"text"),o(),E("aria-label","Mostrar nueva contrase\xF1a")("aria-pressed",!r.hideNewPassword),o(2),F(r.hideNewPassword?"visibility_off":"visibility"),o(),s("ngIf",(T=r.userForm.get("newPasswordUser"))==null?null:T.hasError("required")),o(),s("ngIf",(V=r.userForm.get("newPasswordUser"))==null?null:V.hasError("minlength")),o(4),s("type",r.hideConfirmPassword?"password":"text"),o(),E("aria-label","Mostrar confirmaci\xF3n de contrase\xF1a")("aria-pressed",!r.hideConfirmPassword),o(2),F(r.hideConfirmPassword?"visibility_off":"visibility"),o(),s("ngIf",(B=r.userForm.get("confirmPasswordUser"))==null?null:B.hasError("required")),o(),s("ngIf",r.userForm.errors==null?null:r.userForm.errors.passwordMismatch),o(2),s("disabled",r.userForm.invalid)}},dependencies:[te,Be,ce,ue,de,le,se,me,xe,be,we,ge,ne,oe,re,ie,ae,je,Ue,Ie,Te,ve,Pe,Ee,_e,Ce,Se,ke,ye,Fe,Z,Q],encapsulation:2,changeDetection:0});let a=n;return a})();var At=[{path:"",component:Ae}];export{At as default};
