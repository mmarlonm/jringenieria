import{a as d}from"./chunk-2MWZZXHX.js";import{n as c,q as m}from"./chunk-N75GUXKZ.js";import{$ as h,X as u,fa as l,h as p,q as o}from"./chunk-PTZSXNKB.js";var $=(()=>{let r=class r{constructor(){this.apiUrl=`${d.apiUrl}/profile`,this._httpClient=l(m),this._user=new p(1),this._user.next({id:"",name:"",email:"",avatar:""})}set user(t){this._user.next(t)}get user$(){return this._user.asObservable()}get(){return this._httpClient.get("api/common/user").pipe(u(t=>{this._user.next(t)}))}update(t){return this._httpClient.patch("api/common/user",{user:t}).pipe(o(e=>{this._user.next(e)}))}updateAvatar(t,e){e.append("usuarioId",t);let s=new c({Authorization:`Bearer ${localStorage.getItem("accessToken")}`});return console.log(s),this._httpClient.post(`${this.apiUrl}/upload-avatar`,e,{headers:s}).pipe(o(a=>{if(a.avatarBase64){let f=a.avatarBase64,n=JSON.parse(localStorage.getItem("userInformation")||"{}");n.usuario.avatar=f,localStorage.setItem("userInformation",JSON.stringify(n)),this._user.next(n)}return a}))}updateUser(t){return this._httpClient.put(`${this.apiUrl}/update-user`,t)}changePassword(t,e,s,a){return this._httpClient.post(`${this.apiUrl}/change-password`,{UsuarioId:t,currentPassword:e,newPassword:s,ConfirmPassword:a})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();export{$ as a};
